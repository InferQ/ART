<!DOCTYPE html><html class="default" lang="en" data-base="../"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>ReasoningEngine | ART Framework API Docs</title><meta name="description" content="Documentation for ART Framework API Docs"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="../index.html" class="title">ART Framework API Docs</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb" aria-label="Breadcrumb"><li><a href="" aria-current="page">ReasoningEngine</a></li></ul><h1>Class ReasoningEngine</h1></div><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><p>Default implementation of the ReasoningEngine interface.</p>
<p>This class serves as the central point for all LLM interactions within the ART framework.
It abstracts away the specifics of dealing with different LLM providers (OpenAI, Anthropic,
Gemini, etc.) by delegating to provider-specific ProviderAdapter instances obtained from the
IProviderManager.</p>
<p>Key responsibilities:</p>
<ol>
<li>
<p>Dynamic Provider Selection: Obtains the appropriate ProviderAdapter instance based on
runtime configuration (RuntimeProviderConfig) specified in CallOptions. This allows different
threads or calls to use different LLM providers or models.</p>
</li>
<li>
<p>Resource Management: Ensures that adapter instances are properly released back to the
IProviderManager after use, enabling connection pooling, reuse, and proper cleanup.
This is critical for maintaining performance and preventing resource leaks.</p>
</li>
<li>
<p>Streaming Support: Returns an AsyncIterable that yields tokens, metadata, and
lifecycle events as they arrive from the LLM provider. The implementation wraps the
adapter's stream to ensure proper resource cleanup even if iteration is aborted or errors occur.</p>
</li>
<li>
<p>Error Handling: Transforms provider-specific errors into a consistent interface and
ensures adapters are released even when errors occur during call setup or stream processing.</p>
</li>
</ol>
<p>ReasoningEngine</p>
</div><div class="tsd-comment tsd-typography"><div class="tsd-tag-implements"><h4 class="tsd-anchor-link" id="implements">Implements<a href="#implements" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>IReasoningEngine</p>
</div></div></section><section class="tsd-panel"><h4>Implements</h4><ul class="tsd-hierarchy"><li><span class="tsd-signature-type">ReasoningEngine</span></li></ul></section><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/hashangit/ART/blob/0a239b629fdf1f154ebbcba36600c92f3b8d9c05/src/systems/reasoning/ReasoningEngine.ts#L51">src/systems/reasoning/ReasoningEngine.ts:51</a></li></ul></aside><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><details class="tsd-index-content tsd-accordion" open><summary class="tsd-accordion-summary tsd-index-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h5 class="tsd-index-heading uppercase">Index</h5></summary><div class="tsd-accordion-details"><section class="tsd-index-section"><h3 class="tsd-index-heading">Constructors</h3><div class="tsd-index-list"><a href="#constructor" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Constructor"><use href="../assets/icons.svg#icon-512"></use></svg><span>constructor</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Methods</h3><div class="tsd-index-list"><a href="#call" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>call</span></a>
</div></section></div></details></section></section><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Constructors"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h2>Constructors</h2></summary><section><section class="tsd-panel tsd-member"><h3 class="tsd-anchor-link" id="constructor"><span>constructor</span><a href="#constructor" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class=""><div class="tsd-signature tsd-anchor-link" id="constructorreasoningengine"><span class="tsd-signature-keyword">new</span> <span class="tsd-kind-constructor-signature">ReasoningEngine</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">providerManager</span><span class="tsd-signature-symbol">:</span> <a href="../interfaces/IProviderManager.html" class="tsd-signature-type tsd-kind-interface">IProviderManager</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <a href="" class="tsd-signature-type tsd-kind-class">ReasoningEngine</a><a href="#constructorreasoningengine" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Creates a new ReasoningEngine instance.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">providerManager</span>: <a href="../interfaces/IProviderManager.html" class="tsd-signature-type tsd-kind-interface">IProviderManager</a></span><div class="tsd-comment tsd-typography"><p>The IProviderManager instance responsible for managing provider adapters.
This manager must be pre-configured with available providers and their settings.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <a href="" class="tsd-signature-type tsd-kind-class">ReasoningEngine</a></h4><div class="tsd-comment tsd-typography"><div class="tsd-tag-remarks"><h4 class="tsd-anchor-link" id="remarks">Remarks<a href="#remarks" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>The engine does not create adapters directly but relies on the provider manager to supply
them on demand. This enables centralized management of provider credentials, connection pooling,
and concurrency control.</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/hashangit/ART/blob/0a239b629fdf1f154ebbcba36600c92f3b8d9c05/src/systems/reasoning/ReasoningEngine.ts#L70">src/systems/reasoning/ReasoningEngine.ts:70</a></li></ul></aside></div></li></ul></section></section></details><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Methods"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h2>Methods</h2></summary><section><section class="tsd-panel tsd-member"><h3 class="tsd-anchor-link" id="call"><span>call</span><a href="#call" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class=""><div class="tsd-signature tsd-anchor-link" id="call-1"><span class="tsd-kind-call-signature">call</span><span class="tsd-signature-symbol">(</span><br/>    <span class="tsd-kind-parameter">prompt</span><span class="tsd-signature-symbol">:</span> <a href="../types/ArtStandardPrompt.html" class="tsd-signature-type tsd-kind-type-alias">ArtStandardPrompt</a><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-kind-parameter">options</span><span class="tsd-signature-symbol">:</span> <a href="../interfaces/CallOptions.html" class="tsd-signature-type tsd-kind-interface">CallOptions</a><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">AsyncIterable</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/StreamEvent.html" class="tsd-signature-type tsd-kind-interface">StreamEvent</a><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span><a href="#call-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Executes an LLM call using a dynamically selected provider adapter.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">prompt</span>: <a href="../types/ArtStandardPrompt.html" class="tsd-signature-type tsd-kind-type-alias">ArtStandardPrompt</a></span><div class="tsd-comment tsd-typography"><p>The prompt to send to the LLM. This is the FormattedPrompt type,
which represents an array of standardized messages (ArtStandardMessage[]).
The provider adapter is responsible for translating this to the specific
API format required by the underlying LLM provider.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">options</span>: <a href="../interfaces/CallOptions.html" class="tsd-signature-type tsd-kind-interface">CallOptions</a></span><div class="tsd-comment tsd-typography"><p>Configuration options for this specific LLM call. Must include:
- threadId (string): Required for identifying the thread and loading its configuration
- providerConfig (RuntimeProviderConfig): Specifies which provider and model to use
- traceId (string, optional): For distributed tracing and debugging
- userId (string, optional): For user-specific configuration or logging
- sessionId (string, optional): For multi-tab/session UI scenarios
- stream (boolean, optional): Whether to request streaming responses (default: false)
- callContext (string, optional): Context for the call (e.g., 'AGENT_THOUGHT', 'FINAL_SYNTHESIS')
- Additional provider-specific parameters (e.g., temperature, max_tokens)</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">AsyncIterable</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/StreamEvent.html" class="tsd-signature-type tsd-kind-interface">StreamEvent</a><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></h4><p>A promise resolving to an AsyncIterable<StreamEvent>. The iterable yields events as they arrive:
- TOKEN: Individual text tokens from the LLM
- METADATA: Metadata about the call (token counts, timing, stop reason)
- END: Signal that the stream has completed successfully
- ERROR: Indicates an error occurred during streaming</p>
<pre><code>     The returned iterable is wrapped to ensure proper adapter cleanup when iteration completes
     or is interrupted.
</code></pre>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-remarks"><h4 class="tsd-anchor-link" id="remarks-1">Remarks<a href="#remarks-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>This method orchestrates the entire LLM call lifecycle:</p>
<ol>
<li>
<p>Provider Configuration Validation: Ensures that providerConfig is present in CallOptions.
This is required for the multi-provider architecture.</p>
</li>
<li>
<p>Adapter Acquisition: Requests a ManagedAdapterAccessor from the IProviderManager.
The manager handles:</p>
<ul>
<li>Instantiating new adapters if needed</li>
<li>Reusing existing adapters from the pool</li>
<li>Enforcing concurrency limits (e.g., max parallel API calls per provider)</li>
<li>Managing singleton behavior for local providers (e.g., Ollama)</li>
<li>Queueing requests when limits are reached</li>
</ul>
</li>
<li>
<p>Call Delegation: Delegates the actual LLM call to the obtained adapter's call method.
The adapter is responsible for:</p>
<ul>
<li>Formatting the prompt for the specific provider API</li>
<li>Making the HTTP request</li>
<li>Parsing provider responses into standard StreamEvent objects</li>
<li>Handling provider-specific streaming logic</li>
</ul>
</li>
<li>
<p>Resource Cleanup: Wraps the adapter's stream in a generator that automatically calls
accessor.release() when the stream is consumed, errors occur, or iteration is aborted.
This ensures adapters are always returned to the pool, preventing resource leaks.</p>
</li>
<li>
<p>Error Handling: Catches and logs any errors during adapter acquisition or call execution,
ensuring the adapter is released before re-throwing the error to the caller.</p>
</li>
</ol>
</div><div class="tsd-tag-throws"><h4 class="tsd-anchor-link" id="throws">Throws<a href="#throws" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Throws various errors that may occur:
- Missing &quot;providerConfig&quot; in CallOptions: If provider configuration is not supplied
- Provider-specific errors from adapter acquisition or execution (e.g., authentication failures, rate limits)
- Network errors or timeouts</p>
</div></div><aside class="tsd-sources"><p>Implementation of IReasoningEngine.call</p><ul><li>Defined in <a href="https://github.com/hashangit/ART/blob/0a239b629fdf1f154ebbcba36600c92f3b8d9c05/src/systems/reasoning/ReasoningEngine.ts#L135">src/systems/reasoning/ReasoningEngine.ts:135</a></li></ul></aside></div></li></ul></section></section></details></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Constructors"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Constructors</summary><div><a href="#constructor"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Constructor"><use href="../assets/icons.svg#icon-512"></use></svg><span>constructor</span></a></div></details><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Methods"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Methods</summary><div><a href="#call"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>call</span></a></div></details></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">ART Framework API Docs</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
